<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="images/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="images/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>Stidner - Order API documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json-object&quot;,&quot;php-sdk&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="json-object">json-object</a>
              <a href="#" data-language-name="php-sdk">php-sdk</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.stidner.com/' target='_blank'>About Stidner</a></li>
            <li><a href='https://www.stidner.com/?lang=sv_SE#register-inputs' target='_blank'>Request an API key</a></li>
            <li><a href='mailto:integration@stidner.com'>Ask a question (email)</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="order-api">Order API</h1>

<p>This document references the /order API endpoint and its contents. This API is used to create checkout orders.</p>

<p>Although the API may look complex because of the size of the documentation, it&rsquo;s actually quite straightforward to use:</p>

<ol>
<li>POST a json object containing information about the purchase to the /order endpoint.</li>
<li><em>If the request was invalid in some way</em>, the API gives an error code and message explaining what went wrong.</li>
<li><em>If the request and object was valid</em>, the response will include a URL. This URL should be displayed in an iframe on the merchant&rsquo;s website. All done!</li>
</ol>

<p>Alternatively, we offer a <a href='https://github.com/Stidner/php-sdk' target='_blank'>PHP SDK</a> if you would like to
use that to craft requests. In the future, we plan to offer plugins for various e-commerce platforms.</p>

<p>If you have any questions/comments about anything Stidner-related, please click the &ldquo;ask a question&rdquo; link in the
left-hand sidebar, and we will get back to you. Thanks!</p>

<h2 id="request">Request</h2>
<pre class="highlight json-object"><code><span class="nf">POST</span> <span class="nn">/v1/order</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.stidner.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"merchant_reference1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"merchant_reference2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"purchase_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"purchase_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"se_sv"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">151000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">42750</span><span class="p">,</span><span class="w">
    </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">193750</span><span class="p">,</span><span class="w">
    </span><span class="nt">"shipment_countries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DK"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sven"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"family_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Andersson"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mr"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+46851972000"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"svenandersson@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"addressLine"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drottninggatan 75"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LGH 1102"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46133"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Trollhättan"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Västra Götalands Län"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"digital"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160830"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8000-660SE"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World of Warcraft: Legion"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Digital download"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">66000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">66000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">16500</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">82500</span><span class="p">,</span><span class="w">
            </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/game.jpg"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"physical"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"220333"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5205-250SE"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Golden shoes"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These shoes are made of gold"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">130</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">105000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">105000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">26250</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">131250</span><span class="p">,</span><span class="w">
            </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/goldshoes.jpg"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REA200"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store Credit"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"merchant_urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/terms_of_service.html"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"checkout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/checkout.php"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/confirmation.php"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"color_background"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ffffff"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// Include the composer autoloads, or whatever way you prefer.
</span><span class="k">require_once</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="c1">// Initiate an API handle with the login credentials.
</span><span class="nv">$api_handle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Api</span><span class="p">(</span><span class="nx">USER_ID_NUMBER</span><span class="p">,</span> <span class="s1">'API_KEY'</span><span class="p">);</span>


<span class="c1">// Set the merchant URLs.
// - Terms, Checkout, and Confirmation are required, and can be HTTP.
// - Push and Discount are optional, but must be HTTPS.
</span><span class="nv">$merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Merchant</span><span class="p">();</span>
<span class="nv">$merchant</span><span class="o">-&gt;</span><span class="na">setTerms</span><span class="p">(</span><span class="s1">'http://example.com/terms_of_service.html'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCheckout</span><span class="p">(</span><span class="s1">'http://example.com/checkout.php'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setConfirmation</span><span class="p">(</span><span class="s1">'http://example.com/confirmation.php'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPush</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDiscount</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>


<span class="c1">// Optional: customize display elements on checkout.
// If you don't want to customize, you don't even need this initialized.
</span><span class="nv">$options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Options</span><span class="p">();</span>
<span class="nv">$options</span><span class="o">-&gt;</span><span class="na">setColorButton</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorButtonText</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorCheckbox</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorCheckboxCheckmarks</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorHeader</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorLink</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorBackground</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>


<span class="c1">// Make billing address object.
</span><span class="nv">$billingAddress</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Address</span><span class="p">();</span>
<span class="nv">$billingAddress</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'person'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setBusinessName</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="c1">// Do NOT use if setType("person")!
</span>    <span class="o">-&gt;</span><span class="na">setFirstName</span><span class="p">(</span><span class="s1">'Sven'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setFamilyName</span><span class="p">(</span><span class="s1">'Andersson'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTitle</span><span class="p">(</span><span class="s1">'Mr'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setAddressLine</span><span class="p">(</span><span class="s1">'Drottninggatan 75'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setAddressLine2</span><span class="p">(</span><span class="s1">'LGH 1102'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPostalCode</span><span class="p">(</span><span class="s1">'46133'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCity</span><span class="p">(</span><span class="s1">'Trollhättan'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setRegion</span><span class="p">(</span><span class="s1">'Västra Götalands Län'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPhone</span><span class="p">(</span><span class="s1">'+46851972000'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setEmail</span><span class="p">(</span><span class="s1">'email@example.com'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCountryCode</span><span class="p">(</span><span class="s1">'SE'</span><span class="p">);</span>


<span class="c1">// Add items. Each unique item in the order should have an unique ID or index.
</span><span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'digital'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setArtno</span><span class="p">(</span><span class="s2">"123456"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setSku</span><span class="p">(</span><span class="s2">"5205-250SE"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'World of Warcraft: The Burning Crusade Collectors edition'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s2">"Latest game"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setWeight</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="mi">66000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="mi">2500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">66000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">82500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">16500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s2">"https://example.com/game.jpg"</span><span class="p">);</span>

<span class="c1">// One more unique item (again, using a unique variable or index).
</span><span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'physical'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setArtno</span><span class="p">(</span><span class="s2">"654321"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setSku</span><span class="p">(</span><span class="s2">"5205-250SE"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'Golden shoes'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s2">"These shoes are made of gold"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setWeight</span><span class="p">(</span><span class="mi">1300</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="mi">105000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="mi">2500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">105000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">131250</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">26250</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s2">"https://example.com/goldshoes.jpg"</span><span class="p">);</span>


<span class="c1">// Bundle it all together now...
// Make the main order object, and add everything to it!
</span><span class="nv">$order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order</span><span class="p">();</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">setMerchantReference1</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setMerchantReference2</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPurchaseCountry</span><span class="p">(</span><span class="s2">"SE"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPurchaseCurrency</span><span class="p">(</span><span class="s2">"SEK"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setLocale</span><span class="p">(</span><span class="s2">"sv_se"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">171000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">213750</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">42750</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setBillingAddress</span><span class="p">(</span><span class="nv">$billingAddress</span><span class="p">)</span> <span class="c1">// Don't forget to add all the objects!
</span>    <span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">setMerchantUrls</span><span class="p">(</span><span class="nv">$merchant</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>


<span class="c1">// Now send it off!
</span><span class="k">try</span> <span class="p">{</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$api_handle</span><span class="o">-&gt;</span><span class="na">createOrder</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span>

    <span class="c1">// Get Stidner Checkout's URL, which is in the $request object
</span>    <span class="nv">$iframeUrl</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getIframeUrl</span><span class="p">();</span>

    <span class="c1">// then load that URL in an iframe. Style it however fits best!
</span>    <span class="k">echo</span> <span class="s2">"&lt;iframe src='</span><span class="nv">$iframeUrl</span><span class="s2">' width='75%' height='75%'&gt;&lt;/iframe&gt;"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Stidner\ApiException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="nv">$e</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Stidner\Api\ResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="nv">$e</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>The API can be directly accessed by POSTing to https://api.stidner.com/v1/order, with the following requirements:</p>

<ul>
<li><p>Header &ldquo;Authorization&rdquo;: must be BasicAuth. If you&rsquo;re not using the SDK, it will most likely be a base64-encoded string,
consisting of &ldquo;USER-ID:API-KEY&rdquo;. You will receive these credentials from Stidner after sign-up.</p></li>
<li><p>Header &ldquo;Content-Type&rdquo;: should always be an application/json object.</p></li>
<li><p>Body contents: should be only a properly-formatted json object. An example object is shown to the right in the
json-object language-tab, and the full options can be seen <a href="#order-object">later in the documentation</a>.</p></li>
</ul>

<h2 id="response">Response</h2>
<pre class="highlight json-object"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NWM4MDI5ZWItZGM0MS00ZDQ5LWE1OWYtMmQ0NmU5MzEzZGY3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"iframe_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://complete.stidner.com/order/NWM4MDI5ZWItZGM0MS00ZDQ5LWE1OWYtMmQ0NmU5MzEzZGY3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant_reference1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant_reference2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"purchase_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"purchase_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"se_sv"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">193750</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">151000</span><span class="p">,</span><span class="w">
        </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">42750</span><span class="p">,</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purchase_incomplete"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"shipment_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"choosing_provider"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"shipment_carrier"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"shipment_product"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nt">"shipment_countries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DK"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">],</span><span class="w">
        </span><span class="nt">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"business_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sven"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"family_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Andersson"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mr"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+46851972000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"svenandersson@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drottninggatan 75"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LGH 1102"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46133"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Trollhättan"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Västra Götalands Län"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"shipping_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"business_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sven"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"family_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Andersson"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mr"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+46851972000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"svenandersson@example.com"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drottninggatan 75"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"addressLine2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LGH 1102"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46133"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Trollhättan"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Västra Götalands Län"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"merchant_urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/terms_of_service.html"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"checkout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/checkout.php"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/confirmation.php"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"push"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"created_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-07-26 13:01:26"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"completed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"updated_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-07-26 13:01:26"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"comment"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8000-660SE"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"160830"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"World of Warcraft: Legion"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"digital"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Digital download"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">66000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">16500</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">82500</span><span class="p">,</span><span class="w">
                </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">66000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/game.jpg"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
                </span><span class="nt">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"refunded"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5205-250SE"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"220333"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Golden shoes"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"physical"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"These shoes are made of gold"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">105000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">26250</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">131250</span><span class="p">,</span><span class="w">
                </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mi">130</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">105000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/goldshoes.jpg"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
                </span><span class="nt">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"refunded"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REA200"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store Credit"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_excluding_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_tax_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"total_price_including_tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nt">"quantity_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pcs"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"unit_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
                </span><span class="nt">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nt">"tax_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"returned"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nt">"refunded"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// You shouldn't need to see/handle the API response manually with the PHP SDK,
//  but you can of course var_dump($request) to see the object in testing.
//
// These two lines (previously shown in the example request) is the only handling
//  required for basic operation of the PHP SDK: loading the iframe_url.
</span>
<span class="nv">$iframeUrl</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getIframeUrl</span><span class="p">();</span>
<span class="k">echo</span> <span class="s2">"&lt;iframe src='</span><span class="nv">$iframeUrl</span><span class="s2">' width='75%' height='75%'&gt;&lt;/iframe&gt;"</span><span class="p">;</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>The response from the API will be a json object containing your inputs, and a few read-only items. One of these
read-only items is &ldquo;iframe_url&rdquo;, which is the Stidner Complete checkout URL; this URL should be displayed in an iframe
on the merchant&rsquo;s checkout page.</p>

<p>The HTTP response code will be one of the following:</p>

<ul>
<li>200 OK: all is fine, order is created.</li>
<li>401 Unauthorized: your Authorization header is invalid or missing.</li>
<li>412 Precondition Failed: validation failed on some variable in the json object; the &ldquo;details&rdquo; object in response will give more information.</li>
</ul>

<h1 id="order-object">Order object</h1>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// This creates the main order object, which will be sent to the API.
// Remember to include all the subobjects!
</span>
<span class="nv">$order</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order</span><span class="p">();</span>
<span class="nv">$order</span><span class="o">-&gt;</span><span class="na">setMerchantReference1</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setMerchantReference2</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPurchaseCountry</span><span class="p">(</span><span class="s1">'SE'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPurchaseCurrency</span><span class="p">(</span><span class="s1">'SEK'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setLocale</span><span class="p">(</span><span class="s1">'sv_se'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">171000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">213750</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">42750</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setBillingAddress</span><span class="p">(</span><span class="nv">$billingAddress</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">addItem</span><span class="p">(</span><span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">setMerchantUrls</span><span class="p">(</span><span class="nv">$merchant</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="nv">$options</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>These following tables describe all the objects which will be sent in your
json-formatted POST request to the /order API.</p>

<p>This object will be the &ldquo;main object&rdquo; in your request, containing everything else which will be sent to the order API.</p>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>String</td>
<td>Read-Only</td>
<td>The unique order ID, max 255 characters. This is created by our API, and you should always use it if it has been set.</td>
</tr>
<tr>
<td>iframe_url</td>
<td>String</td>
<td>Read-Only</td>
<td>This URL should be opened in an iframe if it has been set. This URL is typically a link to Stidner Complete&rsquo;s checkout page.</td>
</tr>
<tr>
<td>merchant_reference1, merchant_reference2</td>
<td>String</td>
<td>Optional</td>
<td>Optional internal order IDs, max 255 characters.</td>
</tr>
<tr>
<td>purchase_country</td>
<td>String</td>
<td>Required</td>
<td>The ISO 3166-1 alpha-2 (two character) country code of the customer.<br><br><em>Example: &ldquo;SE&rdquo; for Sweden.</em></td>
</tr>
<tr>
<td>purchase_currency</td>
<td>String</td>
<td>Required</td>
<td>The ISO 4217 (three character) currency code of the customer.<br><br><em>Example: &ldquo;SEK&rdquo; for Swedish kronor.</em></td>
</tr>
<tr>
<td>locale</td>
<td>String</td>
<td>Required</td>
<td>The locale of the customer.<br><br><em>Example: &ldquo;se_sv&rdquo; for a Swedish IP visiting your page using the Swedish language.</em></td>
</tr>
<tr>
<td>total_price_excluding_tax, total_price_including_tax, total_tax_amount</td>
<td>Integer</td>
<td>Required</td>
<td>Price calculation of entire order. These values should include cents/ören (with an implicit decimal).<br><br><em>Example for an order worth 150 SEK before tax, being 187.5 SEK after 25% VAT:</em><br><code class="prettyprint">&quot;total_price_excluding_tax&quot;: 15000,</code><br><code class="prettyprint">&quot;total_tax_amount&quot;: 3750,</code><br><code class="prettyprint">&quot;total_price_including_tax&quot;: 18750</code></td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>Read-Only</td>
<td>A read-only response given by the API, showing status of order. Possible results: <code class="prettyprint">&quot;purchase_incomplete&quot;</code> (default), <code class="prettyprint">&quot;purchase_complete&quot;</code>, and <code class="prettyprint">&quot;purchase_refunded&quot;</code>.</td>
</tr>
<tr>
<td>shipment_status</td>
<td>String</td>
<td>Read-Only</td>
<td>Shows the shipment status of an order. Possible results: <code class="prettyprint">&quot;choosing_provider&quot;</code> (default), <code class="prettyprint">&quot;pending&quot;</code>, and <code class="prettyprint">&quot;shipped&quot;</code>.</td>
</tr>
<tr>
<td>shipment_carrier</td>
<td>String</td>
<td>Read-Only</td>
<td>Shows the selected shipping company. For example: <code class="prettyprint">&quot;dhl&quot;</code>, <code class="prettyprint">&quot;bring&quot;</code>, etc.</td>
</tr>
<tr>
<td>shipment_product</td>
<td>String</td>
<td>Read-Only</td>
<td>Shows what shipping service is being used. For example, <code class="prettyprint">&quot;PICKUP_PARCEL&quot;</code> is the PickUp Parcel service from Bring.</td>
</tr>
<tr>
<td>shipment_countries</td>
<td>Array of strings</td>
<td>Optional</td>
<td>A list of countries which you may send your products to.<br><br><em>Example for shipping within Scandinavia and Finland:</em> <code class="prettyprint">shipment_countries: [ &quot;FI&quot;, &quot;SE&quot;, &quot;NO&quot;, &quot;DK&quot; ]</code></td>
</tr>
<tr>
<td>billing_address</td>
<td><a href="#address-subobject">address</a> Object</td>
<td>Optional</td>
<td>An optional subobject of the customer&rsquo;s billing/shipping info. Use this if you wish to supply some pre-supplied customer info; otherwise the API will do this for you. Please read <a href="#address-subobject">address Subobject</a> for more information.</td>
</tr>
<tr>
<td>shipping_address</td>
<td><a href="#address-subobject">address</a> Object</td>
<td>Read-Only</td>
<td>A read-only response from the API. This contains the customer&rsquo;s shipping information which we fetched ourselves. This has the same structure as the billing-object. Please read <a href="#address-subobject">address Subobject</a> for more information.</td>
</tr>
<tr>
<td>items</td>
<td>Array of <a href="#item-subobject">item</a> Object</td>
<td>Required</td>
<td>This subobject contains an array of objects, with one object for each item being sold to the customer. Please read <a href="#item-subobject">item Subobject</a> for more information.</td>
</tr>
<tr>
<td>merchant_urls</td>
<td><a href="#urls-subobject">URLs</a> Object</td>
<td>Required</td>
<td>Callback URLs for various merchant-page URLs. Please read <a href="#urls-subobject">URLs Object</a> for more information.</td>
</tr>
<tr>
<td>options</td>
<td><a href="#options-subobject">options</a> Object</td>
<td>Optional</td>
<td>Optional checkout design options. Please read <a href="#options-subobject">options Subobject</a> for more information.</td>
</tr>
<tr>
<td>created_date, completed_date, updated_date</td>
<td>Datetime (String)</td>
<td>Read-Only</td>
<td>Read-only response. Gives the datetime the order was created/completed/updated. Formatted as ISO 8601 datetime strings.</td>
</tr>
<tr>
<td>comment</td>
<td>String</td>
<td>Optional</td>
<td>Set a comment on an order.</td>
</tr>
<tr>
<td>free_shipping</td>
<td>Boolean</td>
<td>Optional</td>
<td>Set to True to offer free shipping for the customer. If unset, this will default to False.</td>
</tr>
</tbody></table>

<h2 id="address-subobject">address Subobject</h2>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// Make the optional billing address object.
</span>
<span class="nv">$billingAddress</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Address</span><span class="p">();</span>
<span class="nv">$billingAddress</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'person'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setBusinessName</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="c1">// Do NOT use if setType("person")!
</span>    <span class="o">-&gt;</span><span class="na">setFirstName</span><span class="p">(</span><span class="s1">'Sven'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setFamilyName</span><span class="p">(</span><span class="s1">'Andersson'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTitle</span><span class="p">(</span><span class="s1">'Mr'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setAddressLine</span><span class="p">(</span><span class="s1">'Drottninggatan 75'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setAddressLine2</span><span class="p">(</span><span class="s1">'LGH 1102'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPostalCode</span><span class="p">(</span><span class="s1">'46133'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCity</span><span class="p">(</span><span class="s1">'Trollhättan'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setRegion</span><span class="p">(</span><span class="s1">'Västra Götalands Län'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPhone</span><span class="p">(</span><span class="s1">'+46851972000'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setEmail</span><span class="p">(</span><span class="s1">'email@example.com'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCountryCode</span><span class="p">(</span><span class="s1">'SE'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>This object can be set using the key &ldquo;billing_address&rdquo;, but it is not required.</p>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>String</td>
<td>Required</td>
<td>Must be set to either <code class="prettyprint">&quot;person&quot;</code> (private customers) or <code class="prettyprint">&quot;business&quot;</code> (if selling to a business).</td>
</tr>
<tr>
<td>business_name</td>
<td>String</td>
<td>Conditional</td>
<td>Customer&rsquo;s business name, if they are buying as a business. Max 100 characters.</td>
</tr>
<tr>
<td>first_name</td>
<td>String</td>
<td>Conditional</td>
<td>Customer&rsquo;s first name. Max 100 characters.</td>
</tr>
<tr>
<td>family_name</td>
<td>String</td>
<td>Conditional</td>
<td>Customer&rsquo;s last name. Max 100 characters.</td>
</tr>
<tr>
<td>title</td>
<td>String</td>
<td>Optional</td>
<td>Title of customer. (Mr, Mrs, Dr, etc)</td>
</tr>
<tr>
<td>addressLine</td>
<td>String</td>
<td>Required</td>
<td>Street address of customer, first line. Max 100 characters.<br><br><em>Example: &ldquo;Drottninggatan 57&rdquo;</em></td>
</tr>
<tr>
<td>addressLine2</td>
<td>String</td>
<td>Optional</td>
<td>Street address of customer, second line. Max 100 characters.<br><br><em>Example: &ldquo;LGH 1102&rdquo;</em></td>
</tr>
<tr>
<td>postalCode</td>
<td>String</td>
<td>Required</td>
<td>Customer&rsquo;s postal code.<br><br><em>Example: &ldquo;46132&rdquo;</em></td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>Required</td>
<td>Customer&rsquo;s city.</td>
</tr>
<tr>
<td>region</td>
<td>String</td>
<td>Required</td>
<td>Customer&rsquo;s region or state.<br><br><em>Example: &ldquo;Västra Götalands län&rdquo;</em></td>
</tr>
<tr>
<td>phone</td>
<td>String</td>
<td>Required</td>
<td>Customer&rsquo;s phone number, including country code.<br><br><em>Example: &ldquo;+46851972000&rdquo;</em></td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>Required</td>
<td>Customer&rsquo;s email address.</td>
</tr>
<tr>
<td>countryCode</td>
<td>String</td>
<td>Required</td>
<td>The ISO 3166-1 alpha-2 (two character) country code of the customer.<br><br><em>Example: &ldquo;SE&rdquo; for Sweden.</em></td>
</tr>
</tbody></table>

<h2 id="item-subobject">item Subobject</h2>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// Add items. Each unique item in the order should have an unique ID or index.
</span><span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'digital'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setArtno</span><span class="p">(</span><span class="s1">'123456'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setSku</span><span class="p">(</span><span class="s1">'5205-250SE'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'World of Warcraft: The Burning Crusade Collectors edition'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'Latest game'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setWeight</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="mi">66000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="mi">2500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">66000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">82500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">16500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s1">'https://example.com/game.jpg'</span><span class="p">);</span>

<span class="c1">// One more unique item (again, using a unique variable or index).
</span><span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Item</span><span class="p">();</span>
<span class="nv">$item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setType</span><span class="p">(</span><span class="s1">'physical'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setArtno</span><span class="p">(</span><span class="s1">'654321'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setSku</span><span class="p">(</span><span class="s1">'5205-250SE'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'Golden shoes'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDescription</span><span class="p">(</span><span class="s1">'These shoes are made of gold'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setWeight</span><span class="p">(</span><span class="mi">1300</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantity</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setQuantityUnit</span><span class="p">(</span><span class="s1">'pcs'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setUnitPrice</span><span class="p">(</span><span class="mi">105000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTaxRate</span><span class="p">(</span><span class="mi">2500</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceExcludingTax</span><span class="p">(</span><span class="mi">105000</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalPriceIncludingTax</span><span class="p">(</span><span class="mi">131250</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setTotalTaxAmount</span><span class="p">(</span><span class="mi">26250</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setImageUrl</span><span class="p">(</span><span class="s1">'https://example.com/goldshoes.jpg'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>This is the &ldquo;item&rdquo; subobject, which basically is an array of items in a customer&rsquo;s order, and various related values.</p>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>String</td>
<td>Required</td>
<td>The &ldquo;type of item&rdquo; this object is.<br><br>Acceptable values: <code class="prettyprint">&quot;physical&quot;</code> (items you will eventually ship), <code class="prettyprint">&quot;digital&quot;</code> (non-physical items, such as a software license key), <code class="prettyprint">&quot;fee&quot;</code> (various fees, such as a shipping expense), and <code class="prettyprint">&quot;discount&quot;</code> (store promotions, such as a sale code).</td>
</tr>
<tr>
<td>artno</td>
<td>String</td>
<td>Required</td>
<td>Article number in the internal system.</td>
</tr>
<tr>
<td>sku</td>
<td>String</td>
<td>Optional</td>
<td>The SKU of the item.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Required</td>
<td>The name of the product.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Optional</td>
<td>The description of the product.</td>
</tr>
<tr>
<td>weight</td>
<td>Integer</td>
<td>Conditional</td>
<td>Needed when type is set to &ldquo;physical&rdquo;. Weight of product, in grams. Will be rounded to the nearest tenth.<br><br><em>Example: an item of 10,5kg would be set as &lsquo;1050&rsquo;.</em></td>
</tr>
<tr>
<td>quantity</td>
<td>Integer</td>
<td>Required</td>
<td>Quantity of item.</td>
</tr>
<tr>
<td>quantity_unit</td>
<td>String</td>
<td>Required</td>
<td>Unit to describe quantity. <br><br>Acceptable values: <code class="prettyprint">&quot;pcs&quot;</code>, <code class="prettyprint">&quot;metre&quot;</code>, <code class="prettyprint">&quot;m3&quot;</code>, or <code class="prettyprint">&quot;kg&quot;</code>.</td>
</tr>
<tr>
<td>unit_price</td>
<td>Integer</td>
<td>Required</td>
<td>How much each unit costs. This will be in minor units, excluding tax.<br><br><em>Example: if one unit of an item you&rsquo;re selling is worth 40 SEK before tax, you would use &#39;4000&rsquo; here.</em></td>
</tr>
<tr>
<td>tax_rate</td>
<td>Integer</td>
<td>Required</td>
<td>The tax rate of this item. Written like most numbers in this API: no decimals, but to the 10th place.<br><br><em>Example: in Sweden, the standard VAT rate is 25%, so the request is most likely going to be:</em> <code class="prettyprint">&quot;tax_rate&quot;: 2500</code></td>
</tr>
<tr>
<td>total_price_excluding_tax, total_price_including_tax, total_tax_amount</td>
<td>Integer</td>
<td>Required</td>
<td>This object&rsquo;s price calculations. These values should include cents/ören (with an implicit decimal). Basically the same thing as the main order calculation, but containing only this item&rsquo;s values.<br><br><em>Example: one customer buys 3 of the same coffee mug. 40 SEK is the value of each mug, giving 120 SEK total before tax. Given the VAT rate of 25%, 30 SEK is added in tax. So the finalized values become:</em> <code class="prettyprint">&quot;total_price_excluding_tax&quot;: 12000,</code> <code class="prettyprint">&quot;total_tax_amount&quot;: 3000,</code> <code class="prettyprint">&quot;total_price_including_tax&quot;: 15000</code></td>
</tr>
<tr>
<td>image_url</td>
<td>String</td>
<td>Optional</td>
<td>URL to a picture of this item. Max 2000 characters.</td>
</tr>
</tbody></table>

<h2 id="urls-subobject">urls Subobject</h2>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// Set the merchant URLs.
// - Terms, Checkout, and Confirmation are required, and can be HTTP/HTTPS.
// - Push and Discount are optional, but must be HTTPS.
</span>
<span class="nv">$merchant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Merchant</span><span class="p">();</span>
<span class="nv">$merchant</span><span class="o">-&gt;</span><span class="na">setTerms</span><span class="p">(</span><span class="s1">'http://example.com/terms_of_service.html'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setCheckout</span><span class="p">(</span><span class="s1">'http://example.com/checkout.php'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setConfirmation</span><span class="p">(</span><span class="s1">'http://example.com/confirmation.php'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPush</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setDiscount</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>All of the items in this object are strings, which should be URLs. These URLs should link to various pages of the
merchant&rsquo;s web-shop.</p>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>terms</td>
<td>String</td>
<td>Required</td>
<td>HTTP/HTTPS URL to the merchant&rsquo;s Terms and Conditions page.</td>
</tr>
<tr>
<td>checkout</td>
<td>String</td>
<td>Required</td>
<td>HTTP/HTTPS URL to the merchant&rsquo;s checkout page.</td>
</tr>
<tr>
<td>confirmation</td>
<td>String</td>
<td>Required</td>
<td>HTTP/HTTPS URL to the merchant&rsquo;s confirmation page.</td>
</tr>
<tr>
<td>push</td>
<td>String</td>
<td>Optional</td>
<td>HTTPS-only URL to the merchant push endpoint. If used, this will be an endpoint on the merchant&rsquo;s server which can receive an optional push of the final order status. This will be a json object with basically the same keys and structures as the initial POST&rsquo;s response. If this feature is used, the URL must be HTTPS. <em>As a reminder, if you want to view the formatting:</em> send a GET to https://api.stidner.com/v1/order/$order_id, with &ldquo;$order_id&rdquo; being the order&rsquo;s ID.</td>
</tr>
<tr>
<td>discount</td>
<td>String</td>
<td>Optional</td>
<td>HTTPS-only URL to the merchant&rsquo;s discount page. This is used during checkout to get the value and validity of any discount code provided by the customer. This <strong>must</strong> be set if you are wishing to offer any kinds of discount codes with our discount process. Please read <a href="#discount-callback">Discount Callback</a> for more information and requirements.</td>
</tr>
</tbody></table>

<h2 id="options-subobject">options Subobject</h2>
<pre class="highlight php-sdk"><code><span class="cp">&lt;?php</span>
<span class="c1">// Optional: customize display elements on checkout.
// If you don't want to customize, you don't even need this initialized.
</span>
<span class="nv">$options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Stidner\Model\Order\Options</span><span class="p">();</span>
<span class="nv">$options</span><span class="o">-&gt;</span><span class="na">setColorButton</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorButtonText</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorCheckbox</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorCheckboxCheckmarks</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorHeader</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorLink</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setColorBackground</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<p>All of the items in this object are strings of CSS hex colors (eg #FFFFFF). These are all optional, and only need to be
used if the merchant wishes to customize Stidner&rsquo;s checkout design. Acceptable values:</p>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>color_button</td>
<td>String</td>
<td>Optional</td>
<td>Color to fill the checkout buttons with.</td>
</tr>
<tr>
<td>color_button_text</td>
<td>String</td>
<td>Optional</td>
<td>Color of the characters in the buttons on the checkout pages.</td>
</tr>
<tr>
<td>color_checkbox</td>
<td>String</td>
<td>Optional</td>
<td>Color to fill checkboxes with.</td>
</tr>
<tr>
<td>color_checkbox_checkmarks</td>
<td>String</td>
<td>Optional</td>
<td>Color of any checkmarks in checkboxes.</td>
</tr>
<tr>
<td>color_header</td>
<td>String</td>
<td>Optional</td>
<td>Color of header texts.</td>
</tr>
<tr>
<td>color_link</td>
<td>String</td>
<td>Optional</td>
<td>Color of links.</td>
</tr>
<tr>
<td>color_background</td>
<td>String</td>
<td>Optional</td>
<td>Background coloring.<br><br><em>Example for a white background:</em> <code class="prettyprint">&quot;color_background&quot;: &quot;#ffffff&quot;</code></td>
</tr>
</tbody></table>

<h1 id="discount-callback">Discount Callback</h1>

<p>This section references the <em>optional</em> discount system and how it all connects. There are two parts in this process:</p>

<ol>
<li><a href="#stidner-checkout-39-s-request">Stidner Checkout&rsquo;s request</a>, and</li>
<li><a href="#merchant-39-s-response">Merchant&rsquo;s response</a></li>
</ol>

<p>As a merchant, you have a URL set up which will accept a POST from Stidner&rsquo;s servers containing a json object, and
your response should be another json object showing if the discount code entered was valid or not.</p>

<p>Again, this is a callback for the discount process; you do not need to use it if you are not setting <code class="prettyprint">urls.discount</code> in
the order API, and/or if you will not be offering discount codes in the checkout.</p>

<h2 id="stidner-checkout-39-s-request">Stidner Checkout&rsquo;s request</h2>

<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/discounts</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">merchant.example.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZWU2Mjc0NmYtMDRiMy00ZFOZLTgzNWYtZDU5MGJmZjJmNjQ0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100KR-SALE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This object is sent from Stidner&rsquo;s servers to the merchant&rsquo;s configured discount URL. To make discounting very flexible,
merchants will manage their own discounts through their own endpoint.</p>

<p>To reiterate, merchants will <strong>not</strong> be crafting this request. This request will be sent to the merchant&rsquo;s server
from Stidner&rsquo;s checkout page when a customer tries to enter a discount code. The merchant will simply read this
request (which will be sent to the previously configured <code class="prettyprint">urls.discount</code> endpoint), and will respond in the format
defined in the <a href="#merchant-39-s-response">response section</a>.</p>

<p>Additionally, the merchant endpoint Stidner Checkout will be sending to:</p>

<ul>
<li>must be using HTTPS, and</li>
<li>must only accept requests using your BasicAuth token (which was used to create the order in the first place).</li>
</ul>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>String</td>
<td>Required</td>
<td>The unique order ID. This should always be the existing ID generated by the /order API.</td>
</tr>
<tr>
<td>discount_code</td>
<td>String</td>
<td>Required</td>
<td>The discount code that a customer is trying to apply.</td>
</tr>
<tr>
<td>merchant_reference1, merchant_reference2</td>
<td>String</td>
<td>Optional</td>
<td>Optional internal reference IDs.</td>
</tr>
</tbody></table>

<h2 id="merchant-39-s-response">Merchant&rsquo;s response</h2>

<blockquote>
<p>Example response (<strong>SUCCESS</strong>):</p>
</blockquote>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZWU2Mjc0NmYtMDRiMy00ZFOZLTgzNWYtZDU5MGJmZjJmNjQ0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100KR-SALE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100kr sale!"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Save 100 SEK on all orders of more than 500 SEK."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"artno"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount_100530"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>As said above, this is the merchant&rsquo;s part to handle; all the converting, processing, etc is for the merchant to do.
Stidner Checkout will just take the amount returned here, and internally subtract it from the order&rsquo;s total cost.
<br/><br/></p>

<p><em>If the discount code was valid</em>, the merchant&rsquo;s system should send back everything it received in the previous POST,
and add on the following:</p>

<ol>
<li>An article number for the discount code,</li>
<li>the name and description of the discount code, and</li>
<li>how much currency to subtract from the order.</li>
</ol>

<blockquote>
<p>Example response (<strong>DENIAL</strong>):</p>
</blockquote>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">412</span> <span class="ne">Precondition Failed</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZWU2Mjc0NmYtMDRiMy00ZFOZLTgzNWYtZDU5MGJmZjJmNjQ0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100KR-SALE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code applies only to orders of more than 500 SEK."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><br/></p>

<p><em>If the discount code is invalid</em>, the merchant&rsquo;s system should send back only:</p>

<ol>
<li>The order_id,</li>
<li>the given discount_code, and</li>
<li>a description of why it failed.</li>
<li>HTTP response code 412 (but anything other than 200 should be fine)
<br/><br/></li>
</ol>

<table><thead>
<tr>
<th>Key name</th>
<th>Type</th>
<th>R/O/C</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>String</td>
<td>Read-Only</td>
<td>The unique order ID. This should always be the existing ID previously generated by the /order API.</td>
</tr>
<tr>
<td>discount_code</td>
<td>String</td>
<td>Read-Only</td>
<td>The discount code that a customer is trying to apply.</td>
</tr>
<tr>
<td>merchant_reference1, merchant_reference2</td>
<td>String</td>
<td>Optional</td>
<td>Optional internal reference IDs.</td>
</tr>
<tr>
<td>name, description</td>
<td>String</td>
<td>Required</td>
<td>A name and description of what the discount is for. This will be shown on various customer and merchant pages, so proper (non-&ldquo;internal&rdquo;) descriptions and names are important, as to reduce any possible confusion! The description should be set to a customer-friendly error message if the discount code is denied; see above denial for an example.</td>
</tr>
<tr>
<td>artno</td>
<td>String</td>
<td>Required</td>
<td>Article number for internal system.</td>
</tr>
<tr>
<td>amount</td>
<td>Integer</td>
<td>Required</td>
<td>This should be how much to subtract from the order. This should be in basic units (meaning 100 SEK becomes &#39;10000&rsquo;, 5 EUR is &#39;500&rsquo;, etc).</td>
</tr>
</tbody></table>

<h1 id="questions-comments">Questions/Comments</h1>

<p>We hope this documentation was useful and answered any questions regarding the Stidner Complete API! But documentation
doesn&rsquo;t always answer everything, so please feel free to get in contact with us via
<a href='mailto:integration@stidner.com'>email</a>. Thank you!</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json-object">json-object</a>
                <a href="#" data-language-name="php-sdk">php-sdk</a>
          </div>
      </div>
    </div>
    <script>
      (function(i,s,o,g,r,a,m){i['Googl'+'eAn'+'alyti'+'csObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.goo'+'gle-ana'+'lytics.com/an'+'alyti'+'cs.js','ga');

      ga('create', 'U'+'A-78'+'7350'+'40-'+'14', 'auto');
      ga('require', 'linkid');
      ga('send', 'pageview');
    </script>
  </body>
</html>
